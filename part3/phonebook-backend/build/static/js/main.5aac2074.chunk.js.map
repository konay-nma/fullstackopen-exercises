{"version":3,"sources":["component/Filter.js","component/Notifications.js","component/PersonForm.js","component/Persons.js","service/service.js","App.js","index.js"],"names":["Filter","handleFilterChange","onChange","Notifications","errorMessage","message","className","PersonForm","props","onSubmit","handleSubmit","value","newName","handleNameChange","newNumber","handlePhoneChange","type","Persons","person","onDelete","name","number","onClick","id","baseUrl","newObj","axios","post","then","res","data","get","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","filter","setFilter","setMessage","setErrorMessage","addPerson","service","concat","nullMessage","catch","err","nullError","updatePerson","alreadyAddedPerson","find","console","log","window","confirm","returnPerson","map","setTimeout","personsToShow","toLowerCase","includes","useEffect","initialPersons","e","target","preventDefault","alreadyAdd","trim","undefined","key","deletePerson","isDeleted","afterDeleted","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5aac2074.chunk.js","sourcesContent":["import React from 'react';\nconst Filter = ({handleFilterChange}) => <div>filter shown with <input onChange={handleFilterChange} /></div>\nexport default Filter","import React from 'react'\nconst Notifications = ({ errorMessage, message }) => {\n    if (errorMessage !== null) {\n        return (\n            <div className=\"error\">{errorMessage}</div>\n        )\n    } else if (message !== null) {\n        return (\n            <div className=\"message\">{message}</div>\n        )\n    }\n    return null;\n}\n\nexport default Notifications","import React from 'react';\n\nconst PersonForm = (props) =>\n    <form onSubmit={props.handleSubmit}>\n        <div>\n            name: <input value={props.newName} onChange={props.handleNameChange} /> <br />\n            number: <input value={props.newNumber} onChange={props.handlePhoneChange} />\n        </div>\n        <div>\n            <button type=\"submit\">add</button>\n        </div>\n    </form>\n\nexport default PersonForm","import React from 'react';\nconst Persons = ({ person, onDelete }) => <><div> {person.name} {person.number} <button onClick = {()=> onDelete(person.id)}>delete</button></div></>\nexport default Persons","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(res => res.data)\n}\n\nconst create = newObj => {\n    const request = axios.post(baseUrl, newObj)\n    return request.then(res => res.data)\n}\n\nconst update = (id, newObj) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObj)\n    return request.then(res => res.data)\n}\n\nconst deletePerson = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(res => res.data)\n}\n\nexport default {create, getAll, update, deletePerson}","import React, { useEffect, useState } from 'react';\n\nimport Filter from './component/Filter';\nimport Notifications from './component/Notifications';\nimport PersonForm from './component/PersonForm';\nimport Persons from './component/Persons';\n\nimport service from './service/service';\nimport '../src/index.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('button clicked', e.target)\n    if (newName === '' || newNumber === '') return\n    const alreadyAdd = persons.find(person => newName.trim() === person.name)\n    console.log(alreadyAdd)\n    alreadyAdd === undefined ?\n      addPerson(newName, newNumber)\n      // setPersons([...persons, { name: newName, number: newNumber }])\n      :\n      // alert(`${newName} is already added to phonebook`)\n      updatePerson(alreadyAdd.id)\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const addPerson = (newName, newNumber) => {\n    const newObj = { name: newName, number: newNumber }\n    service\n      .create(newObj)\n      .then(addPerson => {\n        setPersons(persons.concat(addPerson))\n        setMessage(`${addPerson.name} is successfully added`)\n        nullMessage()\n      })\n      .catch(err => {\n        nullError()\n      })\n  }\n\n  const updatePerson = id => {\n    const alreadyAddedPerson = persons.find(person => person.id === id)\n    const updatePerson = { ...alreadyAddedPerson, number: newNumber }\n    console.log('update', updatePerson)\n    window.confirm(`${alreadyAddedPerson.name} is already added, replace the old number with the new one?`) &&\n      service\n        .update(id, updatePerson)\n        .then(returnPerson => {\n          console.log('return valure', returnPerson)\n          setPersons(persons.map(person => person.id !== id ? person : returnPerson))\n          setMessage(`${returnPerson.name} is successfully updated`)\n          nullMessage()\n        })\n        .catch(err => {\n          console.log(err)\n        })\n  }\n\n  const nullMessage = () => {\n    setTimeout(()=> {\n      setMessage(null)\n    }, 5000)\n  }\n\n  const nullError = () => {\n    setTimeout(()=> {\n      setErrorMessage(null)\n    }, 5000)\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handlePhoneChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilterChange = (e) => {\n    setFilter(e.target.value.toLowerCase())\n  }\n\n  const personsToShow = filter === '' ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filter))\n\n  useEffect(() => {\n    service\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const onDelete = id => {\n    const deletePerson = persons.find(person => id === person.id)\n    const isDeleted = window.confirm(`Delted ${deletePerson.name}?`)\n    const afterDeleted = persons.filter(person => id !== person.id)\n    if (!isDeleted) return\n    service\n      .deletePerson(id)\n      .then(res => {\n        setPersons(afterDeleted)\n        setMessage(`${deletePerson.name} is successfully deleted`)\n        nullMessage()\n      })\n      .catch(err => {\n        setErrorMessage(`information of ${deletePerson.name} has been already removed from the server`)\n        setPersons(persons.filter(person => person.id !== id))\n        nullError()\n      })\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notifications errorMessage = {errorMessage} message = {message} />\n      <Filter handleFilterChange={handleFilterChange} />\n      <h3>add new</h3>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        handleNameChange={handleNameChange}\n        handlePhoneChange={handlePhoneChange}\n        newName={newName} newNumber={newNumber} />\n      <h2>Numbers</h2>\n      {\n        personsToShow.map(person => <Persons person={person} key={person.id} onDelete={() => onDelete(person.id)} />)\n      }\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n"],"sourceRoot":""}